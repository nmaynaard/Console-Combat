using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using static System.Console;

namespace consoleCombat
{
    public class combat
    {
        public void Test()
        {
            Write("Username:");
            string name = ReadLine();
            player = new Player(name, 40, ConsoleColor.Magenta);
            for (int i = 0; i < enemies.Count; i += 1)
            {
                CurrentEnemy = enemies[i];
                CurrentEnemy.DisplayInfo();
                ReadKey(true);
                Battle();
                if (player._isDead)
                {
                    WriteLine("You Died");
                    ReadKey(true);
                    break;
                }
                else
                {
                    WriteLine("You Survived");
                    ReadKey(true);
                }
            }

        }
        public void Battle()
        {
            Clear();
            while (player._isAlive && CurrentEnemy._isAlive)
            {
                player.HealthBar();
                CurrentEnemy.HealthBar();
                WriteLine();
                player.Attack(CurrentEnemy);
                WriteLine();
                ReadKey(true);
                if (player._isDead || CurrentEnemy._isDead) break;
                Clear();
                player.HealthBar();
                CurrentEnemy.HealthBar();
                WriteLine();
                CurrentEnemy.Attack(player);
                ReadKey(true);
            }
        }

    }
}